<ul class="nav nav-tabs" style="margin-bottom: -0.1em;">
    <li>
        <a href="/#/recipe">Mis recetas ({{stats.owns}})</a>
    </li>
    <li>
        <a href="/#/favorites">Favoritas ({{user.favorites.length}})</a>
    </li>
    <li class="active">
        <a><b>Publicadas ({{stats.publics}})</b></a>
    </li>
</ul>
<div ng-cloak>
    <div class="panel panel-default" ng-show="published.length!=0">
        <div class="panel-body" >
            <div class="col-md-4" >
                <div class="input-group" style="width: 100%">
                    <input type="text"  class="form-control input-sm" ng-model="publicSearchCriteria" placeholder="(Busqueda)" >
                    <span class="input-group-btn">
                        <button ng-init="publicSearchCriteria=''" ng-hide="publicSearchCriteria==''" ng-click="publicSearchCriteria=''" class="btn btn-default btn-sm" type="button">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </div>
            <div class="col-md-6" ng-hide="publicSearchCriteria==''" style="padding-top: 5px;">
                <ng-pluralize count="(published | filter:publicSearchCriteria).length"
                        when="{'0':'No se ha encontrado ningun resultado con su busqueda','one': '1 receta encontrada','other':'{} recetas encontradas'}"></ng-pluralize>
            </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
                <th style="width:1em"><span class="glyphicon glyphicon-star"></span></th>
                <th style="width:7em" ng-click="sort.resort('publishDate')" class="gt-sorted">
                    Fecha <span ng-class="sort.orderStyle['publishDate']"></span>
                </th>
                <th ng-click="sort.resort('NAME')" class="gt-sorted">
                    Nombre <span ng-class="sort.orderStyle['NAME']"></span>
                </th>
                <th style="width:13em" ng-click="sort.resort('STYLE.NAME')" class="gt-sorted">
                    Estilo <span ng-class="sort.orderStyle['STYLE.NAME']"></span>
                </th>
                <th style="width:4em" ng-click="sort.resort('OG')" class="gt-sorted">
                    DI <span ng-class="sort.orderStyle['OG']"></span>
                </th>
                <!--<th style="width:4em">DF</th>-->
                <th style="width:5em" ng-click="sort.resort('ABV')" class="gt-sorted">
                    %Alc <span ng-class="sort.orderStyle['ABV']"></span>
                </th>
                <th style="width:5em" ng-click="sort.resort('CALCIBU')" class="gt-sorted">
                    IBUs <span ng-class="sort.orderStyle['CALCIBU']"></span>
                </th>
                <th style="width:7em" ng-click="sort.resort('BATCH_SIZE')" class="gt-sorted">
                    Batch (L) <span ng-class="sort.orderStyle['BATCH_SIZE']"></span>
                </th>
                <th style="width:10em" ng-click="sort.resort('BREWER')" class="gt-sorted">
                    Cervecero <span ng-class="sort.orderStyle['BREWER']"></span>
                </th>
                <th style="width:10em" ng-click="sort.resort('owner.name')" class="gt-sorted">
                    Compartida por <span ng-class="sort.orderStyle['owner.name']"></span>
                </th>
                <!--<th style="width:1em"></th>-->
                <!--<th style="width:1em"></th>-->
                <th style="width:1em"></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="recipe in published | filter:publicSearchCriteria | orderBy:sort.orderBy()">
                <td>
                    <span ng-hide="recipe.owner._id == user._id">
                        <a ng-hide="user.favorites.indexOf(recipe._id) != -1" type="button" class="glyphicon glyphicon-star-empty" ng-click="addFavorites(recipe)"></a>
                        <a ng-show="user.favorites.indexOf(recipe._id) != -1" type="button" class="glyphicon glyphicon-star" ng-click="removeFavorites(recipe)"></a>
                    </span>
                </td>
                <td>{{ recipe.publishDate|date:'dd-MM-yyyy' }}</td>
                <td title="{{recipe.NAME}}">
                    <a ng-hide="recipe.owner._id == user._id" href="{{sharedUrl(recipe._id)}}">{{ recipe.NAME|limitText:30}}</a>
                    <a ng-show="recipe.owner._id == user._id" href="#/recipe/edit/{{encodeName(recipe._id)}}">{{ recipe.NAME|limitText:30}}</a>
                </td>
                <td>{{ recipe.STYLE.NAME }}</td>
                <td>{{ recipe.OG  }}</td>
                <!--<td>{{ recipe.FG  }}</td>-->
                <td>{{ recipe.ABV  }}</td>
                <td>{{ recipe.CALCIBU }}</td>
                <td>{{ recipe.BATCH_SIZE }}</td>
                <td>{{ recipe.BREWER }}</td>
                <td>
                    <a href="/#/home/{{recipe.owner._id}}">
                        <span ng-show="recipe.owner._id == user._id">Mi</span>
                        <span ng-hide="recipe.owner._id == user._id">{{ recipe.owner.name }}</span>
                    </a>
                </td>
                <!--<td>-->
                    <!--<a ng-show="recipe.owner._id == user._id" href="#/recipe/edit/{{encodeName(recipe._id)}}" type="button" class="btn btn-primary btn-xs">editar</a>-->
                <!--</td>-->
                <!--<td>-->
                    <!--<a target="_blank" href="{{sharedUrl(recipe._id)}}"><span class="glyphicon glyphicon-link"></a></span>-->
                <!--</td>-->
                <td>
                    <a href="#/recipe/clone/{{encodeName(recipe._id)}}" type="button" class="btn btn-default btn-xs">clonar</a>
                </td>
            </tr>
          </tbody>
        </table>
        <!--<div class="panel-body">-->
            <!--<button type="button" class="btn btn-link pull-right" ng-click="findMore()">Buscar mas</button>-->
        <!--</div>-->
    </div>
    <div class="panel panel-default" ng-hide="published.length!=0">
        <div class="panel-body">
          <div class="alert alert-info">
                No hay recetas publicadas
          </div>
        </div>
    </div>
</div>