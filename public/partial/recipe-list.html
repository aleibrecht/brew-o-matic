<div>
    <div class="panel panel-default" ng-show="recipes.length!=0">
        <div class="panel-heading"><strong>Mis Recetas ({{(recipes | filter:searchCriteria).length}})</strong></div>
        <div class="panel-body" >
            <div class="input-group" style="width: 400px">
                <input type="text"  class="form-control input-sm" ng-model="searchCriteria">
                <span class="input-group-btn">
                    <!--<button class="btn btn-default" type="button">-->
                    <!--    <span class="glyphicon glyphicon-search"></span>-->
                    <!--</button>-->
                    <button ng-click="searchCriteria=''" class="btn btn-default btn-sm" type="button">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </span>
            </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th style="width:4.5em">#</th>
              <th style="width:7em">Fecha</th>
              <th>Nombre</th>
              <th style="width:14em">Estilo</th>
              <th style="width:4em">DI</th>
              <th style="width:4em">DF</th>
              <th style="width:4em">%Alc</th>
              <th style="width:4em">IBUs</th>
              <th style="width:6em">Batch (L)</th>
              <th style="width:10em">Autor</th>
              <th style="width:9em"></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="recipe in recipes | filter:searchCriteria">
                <td>
                    <a href="#/recipe/edit/{{encodeName(recipe._id)}}">#{{ $index+1 }}</a>
                    <span class="glyphicon glyphicon-check" title="Esta receta es publica, puede ser vista por todos los usuarios" ng-show="recipe.isPublic"/>
                </td>
                <td>{{ recipe.date|date:'dd-MM-yyyy' }}</td>
                <td title="{{recipe.NAME}}">
                    <a href="#/recipe/edit/{{encodeName(recipe._id)}}">{{ recipe.NAME|limitText:23}}</a>
                </td>
                <td>{{ recipe.STYLE.NAME }}</td>
                <td>{{ recipe.OG  }}</td>
                <td>{{ recipe.FG  }}</td>
                <td>{{ recipe.ABV  }}</td>
                <td>{{ recipe.CALCIBU }}</td>
                <td>{{ recipe.BATCH_SIZE }}</td>
                <td>{{ recipe.BREWER }}</td>
                <td>
                    <a href="#/recipe/edit/{{encodeName(recipe._id)}}" type="button" class="btn btn-primary btn-xs">editar</a>
                    <a href="#/recipe/clone/{{encodeName(recipe._id)}}" type="button" class="btn btn-default btn-xs">clonar</a>
                    <!--<button type="button" class="close" aria-hidden="true" ng-click="removeRecipe(recipe._id)">&times;</button>-->
                    <button data-target="#confirmation{{recipe._id}}" data-toggle="modal"  type="button" class="close" aria-hidden="true">&times;</button>
                    <div class="modal fade" id="confirmation{{recipe._id}}" role="dialog" aria-labelledby="#label">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="label">Confirmacion</h4>
                                </div>
                                <div class="modal-body">
                                    Â¿Esta seguro que desea eliminar la receta?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn" data-dismiss="modal">No</a>
                                    <button type="button" ng-click="removeRecipe(recipe._id)" class="btn btn-primary" >
                                        Si
                                    </button >
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
          </tbody>
        </table>
        <div class="panel-body">
            <a type="button" class="btn btn-default pull-right" href="#/recipe/new">Nueva receta</a>
        </div>
    </div>
    <div class="panel panel-default" ng-hide="recipes.length!=0">
        <div class="panel-heading"><strong>Mis Recetas</strong></div>
        <div class="panel-body">
          <div class="alert alert-info">
                Aun no tiene recetas creadas 
                <a href="#/recipe/new" class="alert-link">Crea tu primera receta desde aca!</a>
          </div>
          <a type="button" class="btn btn-default pull-right" href="#/recipe/new">Nueva receta</a>
        </div>
    </div>
</div>

<div>
    <div class="panel panel-default" ng-show="(published | filterFavorites:user.favorites).length!=0">
        <div class="panel-heading"><strong>Favoritas</strong></div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
                <th><span class="glyphicon glyphicon-star"></span></th>
                <th style="width:7em">Fecha</th>
                <th>Nombre</th>
                <th style="width:13em">Estilo</th>
                <th style="width:4em">DI</th>
                <th style="width:4em">DF</th>
                <th style="width:4em">%Alc</th>
                <th style="width:4em">IBUs</th>
                <th style="width:6em">Batch (L)</th>
                <th style="width:10em">Autor</th>
                <th style="width:10em">Compartida por</th>
                <th style="width:90px"></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="recipe in published | filterFavorites:user.favorites">
                <td>
                    <a ng-hide="user.favorites.indexOf(recipe._id) != -1" href="#/recipe" type="button" class="glyphicon glyphicon-star-empty" ng-click="addFavorites(recipe)"></a>
                    <a ng-show="user.favorites.indexOf(recipe._id) != -1" href="#/recipe" type="button" class="glyphicon glyphicon-star" ng-click="removeFavorites(recipe)"></a>
                </td>
                <td>{{ recipe.date|date:'dd-MM-yyyy' }}</td>
                <td title="{{recipe.NAME}}"><a target="_blank" href="{{sharedUrl(recipe._id)}}">{{ recipe.NAME|limitText:30}}</a></td>
                <td>{{ recipe.STYLE.NAME }}</td>
                <td>{{ recipe.OG  }}</td>
                <td>{{ recipe.FG  }}</td>
                <td>{{ recipe.ABV  }}</td>
                <td>{{ recipe.CALCIBU }}</td>
                <td>{{ recipe.BATCH_SIZE }}</td>
                <td>{{ recipe.BREWER }}</td>
                <td>{{ recipe.owner.name }}</td>
                <td>
                    <a target="_blank" href="{{sharedUrl(recipe._id)}}"><span class="glyphicon glyphicon-link"></a></span>
                    <a href="#/recipe/clone/{{encodeName(recipe._id)}}" type="button" class="btn btn-default btn-xs">clonar</a>
                </td>
            </tr>
          </tbody>
        </table>
        <!--<div class="panel-body">-->
            <!--<button type="button" class="btn btn-link pull-right" ng-click="findMore()">Buscar mas</button>-->
        <!--</div>-->
    </div>
    <div class="panel panel-default" ng-hide="(published | filterFavorites:user.favorites).length!=0">
        <div class="panel-heading"><strong>Favoritas</strong></div>
        <div class="panel-body">
          <div class="alert alert-info">
                Aun no tenes ninguna receta favorita
          </div>
        </div>
    </div>
</div>

<div>
    <div class="panel panel-default" ng-show="published.length!=0">
        <div class="panel-heading"><strong>Recetas Publicadas ({{(published | filter:publicSearchCriteria).length}})</strong></div>
        <div class="panel-body" >
            <div class="input-group" style="width: 400px">
                <input type="text"  class="form-control input-sm" ng-model="publicSearchCriteria">
                <span class="input-group-btn">
                    <button ng-click="publicSearchCriteria=''" class="btn btn-default btn-sm" type="button">
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </span>
            </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
                <th><span class="glyphicon glyphicon-star"></span></th>
                <th style="width:7em">Fecha</th>
                <th>Nombre</th>
                <th style="width:13em">Estilo</th>
                <th style="width:4em">DI</th>
                <th style="width:4em">DF</th>
                <th style="width:4em">%Alc</th>
                <th style="width:4em">IBUs</th>
                <th style="width:6em">Batch (L)</th>
                <th style="width:10em">Autor</th>
                <th style="width:10em">Compartida por</th>
                <th style="width:90px"></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="recipe in published | filter:publicSearchCriteria">
                <td>
                    <a ng-hide="user.favorites.indexOf(recipe._id) != -1" href="#/recipe" type="button" class="glyphicon glyphicon-star-empty" ng-click="addFavorites(recipe)"></a>
                    <a ng-show="user.favorites.indexOf(recipe._id) != -1" href="#/recipe" type="button" class="glyphicon glyphicon-star" ng-click="removeFavorites(recipe)"></a>
                </td>
                <td>{{ recipe.date|date:'dd-MM-yyyy' }}</td>
                <td title="{{recipe.NAME}}"><a target="_blank" href="{{sharedUrl(recipe._id)}}">{{ recipe.NAME|limitText:30}}</a></td>
                <td>{{ recipe.STYLE.NAME }}</td>
                <td>{{ recipe.OG  }}</td>
                <td>{{ recipe.FG  }}</td>
                <td>{{ recipe.ABV  }}</td>
                <td>{{ recipe.CALCIBU }}</td>
                <td>{{ recipe.BATCH_SIZE }}</td>
                <td>{{ recipe.BREWER }}</td>
                <td>{{ recipe.owner.name }}</td>
                <td>
                    <a target="_blank" href="{{sharedUrl(recipe._id)}}"><span class="glyphicon glyphicon-link"></a></span>
                    <a href="#/recipe/clone/{{encodeName(recipe._id)}}" type="button" class="btn btn-default btn-xs">clonar</a>
                </td>
            </tr>
          </tbody>
        </table>
        <!--<div class="panel-body">-->
            <!--<button type="button" class="btn btn-link pull-right" ng-click="findMore()">Buscar mas</button>-->
        <!--</div>-->
    </div>
    <div class="panel panel-default" ng-hide="published.length!=0">
        <div class="panel-heading"><strong>Recetas Publicadas</strong></div>
        <div class="panel-body">
          <div class="alert alert-info">
                No hay recetas publicadas
          </div>
        </div>
    </div>
</div>