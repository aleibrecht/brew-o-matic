<!DOCTYPE html>
<html ng-app="index">
  <head>
    <title>Brew-o-Matic</title>
    <link rel='stylesheet' href='/css/style.css' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <script src="http://code.jquery.com/jquery.js"></script>    
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular-resource.min.js"></script>
    <script src="js/index.js"></script>
    <script src="js/Data.js"></script>
    <script src="js/ObjTree.js"></script>
  </head>
  <body ng-controller="MainController" id="MainController">
    <div id="fb-root"></div>
    <!--<script src="js/fb.js"></scsript>-->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
      <a class="navbar-brand" href="#">
        Brew-o-Matic <!--<button class="btn btn-xs btn-danger">beta</button>-->
      </a>
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a id="email" href="#"></a></li>
          <!--<li><a href="#">Link</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li><a href="#">Separated link</a></li>
              <li><a href="#">One more separated link</a></li>
            </ul>
          </li>-->
        </ul>
        <span id="signinButton" class="navbar-form navbar-right">
          <span
            class="g-signin"
            data-callback="signinCallback"
            data-clientid="819410194566.apps.googleusercontent.com"
            data-cookiepolicy="single_host_origin"
            data-requestvisibleactions="http://schemas.google.com/AddActivity"
            data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile">
          </span>
        </span>
      </div>
      </div>
    </nav>
    <div class="container" style="margin-top: 1em;">
      <div class="row" >
        <div class="col-md-2" >
          <div class="panel panel-default" style="max-width:200px; max-height:200px;">
            <div class="panel-body" >
              <img src="images/logo.jpg" style="max-width:100%; max-height:100%;"/>
            </div>
          </div>
        </div>
        <div class="col-md-10" >
          <ol class="breadcrumb">
            <li ng-repeat="item in breadcrumbs">
              <a ng-hide="$last" href="{{item.link}}">{{item.title}}</a>
              <span ng-show="$last" class="active" >{{item.title}}</span>
            </li>
          </ol>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row" >
        <div class="col-md-2">
          <div class="panel panel-default">
            <div class="panel-heading"><strong>Opciones</strong></div>
            <div class="panel-body">
              
            </div>
          </div>
        </div>
        <div class="col-md-10">
          <div ng-view></div>
        </div>
      </div>
      <!--<footer>-->
      <!--  <fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button>-->
      <!--</footer>-->
    </div>
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/client:plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
      
      function getEmailCallback(obj){
        var el = document.getElementById('email');
        var email = '';
    
        if (obj.name) {
          el.innerHTML = obj.name;
        } else if (obj['email']) {
          el.innerHTML = 'Email: ' + obj['email'];
        }
        
      }
      
      function signinCallback(authResult) {
        if (authResult['access_token']) {
          // Autorizado correctamente
          // Oculta el botón de inicio de sesión ahora que el usuario está autorizado, por ejemplo:
          
          gapi.auth.setToken(authResult);
          
          gapi.client.load('oauth2', 'v2', function() {
            var request = gapi.client.oauth2.userinfo.get();
            request.execute(getEmailCallback);
          });
          
          document.getElementById('signinButton').setAttribute('style', 'display: none');
        } else if (authResult['error']) {
          // Se ha producido un error.
          // Posibles códigos de error:
          //   "access_denied": el usuario ha denegado el acceso a la aplicación.
          //   "immediate_failed": no se ha podido dar acceso al usuario de forma automática.
          // console.log('There was an error: ' + authResult['error']);
        }
      }
    </script>    
  </body>
  
</html>